const PLAINTEXT_SCORES: [f64; 0x80] = [
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    2.6457513110645907,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    3.3166247903554,
    0.0,
    0.0,
    1.7320508075688772,
    3.605551275463989,
    0.0,
    0.0,
    2.23606797749979,
    3.0,
    0.0,
    0.0,
    1.4142135623730951,
    0.0,
    2.8284271247461903,
    3.1622776601683795,
    0.0,
    0.0,
    2.0,
    2.449489742783178,
    3.4641016151377544,
    1.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    3.3166247903554,
    0.0,
    0.0,
    1.7320508075688772,
    3.605551275463989,
    0.0,
    0.0,
    2.23606797749979,
    3.0,
    0.0,
    0.0,
    1.4142135623730951,
    0.0,
    2.8284271247461903,
    3.1622776601683795,
    0.0,
    0.0,
    2.0,
    2.449489742783178,
    3.4641016151377544,
    1.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
];

pub fn score_english_plaintext(x: &[u8]) -> f64 {
    x.iter()
        .map(|b| PLAINTEXT_SCORES[(b & 0x7F) as usize])
        .fold(0.0, |a, b| a + b)
        / (x.len() as f64)
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_score_english_plaintext_sanity_check() {
        let common_string = "ETAION SHRDLU";
        let uncommon_string = "FOO BAR BAZ";
        assert!(
            score_english_plaintext(common_string.as_bytes())
                > score_english_plaintext(uncommon_string.as_bytes())
        )
    }
}
